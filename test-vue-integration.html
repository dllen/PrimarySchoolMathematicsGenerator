<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç­–ç•¥æ¨¡å¼é›†æˆæµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        .success { color: green; }
        .error { color: red; }
        .problem { margin: 5px 0; padding: 5px; background: #f5f5f5; }
    </style>
</head>
<body>
    <h1>ç­–ç•¥æ¨¡å¼é‡æ„ - Vueç»„ä»¶é›†æˆæµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>æµ‹è¯•ç»“æœ</h2>
        <div id="test-results"></div>
    </div>

    <script type="module">
        import { ProblemGeneratorContext } from './src/strategies/ProblemGeneratorFactory.js';

        // æ¨¡æ‹ŸVueç»„ä»¶çš„é…ç½®
        const config = {
            digits: { add: 2, subtract: 2, multiply: 1, divide: 1 },
            problemCount: 5,
            termCount: 3,
            operations: { add: true, subtract: true, multiply: true, divide: false },
            useBrackets: false,
            allowRepeatOperators: true,
            problemType: 'result',
        };

        function runTests() {
            const resultsDiv = document.getElementById('test-results');
            let testResults = [];

            try {
                // æµ‹è¯•1: åˆå§‹åŒ–é¢˜ç›®ç”Ÿæˆå™¨
                testResults.push('âœ… æµ‹è¯•1: é¢˜ç›®ç”Ÿæˆå™¨åˆå§‹åŒ–æˆåŠŸ');
                const problemGenerator = new ProblemGeneratorContext(config);
                problemGenerator.setStrategy(config.problemType);

                // æµ‹è¯•2: ç”Ÿæˆæ±‚ç»“æœé¢˜ç›®
                testResults.push('âœ… æµ‹è¯•2: æ±‚ç»“æœé¢˜ç›®ç”Ÿæˆ');
                const resultProblems = problemGenerator.generateProblems(3);
                resultProblems.forEach((problem, index) => {
                    testResults.push(`  é¢˜ç›®${index + 1}: ${problem.expression} (ç­”æ¡ˆ: ${problem.answer})`);
                });

                // æµ‹è¯•3: åˆ‡æ¢åˆ°æ±‚è¿ç®—é¡¹ç­–ç•¥
                testResults.push('âœ… æµ‹è¯•3: åˆ‡æ¢åˆ°æ±‚è¿ç®—é¡¹ç­–ç•¥');
                problemGenerator.setStrategy('operand');
                const operandProblems = problemGenerator.generateProblems(3);
                operandProblems.forEach((problem, index) => {
                    testResults.push(`  é¢˜ç›®${index + 1}: ${problem.expression} (ç­”æ¡ˆ: ${problem.answer})`);
                });

                // æµ‹è¯•4: é…ç½®æ›´æ–°
                testResults.push('âœ… æµ‹è¯•4: é…ç½®æ›´æ–°æµ‹è¯•');
                problemGenerator.updateConfig({ 
                    allowRepeatOperators: false,
                    termCount: 2 
                });
                problemGenerator.setStrategy('result');
                const updatedProblems = problemGenerator.generateProblems(2);
                updatedProblems.forEach((problem, index) => {
                    testResults.push(`  æ›´æ–°åé¢˜ç›®${index + 1}: ${problem.expression} (ç­”æ¡ˆ: ${problem.answer})`);
                });

                testResults.push('ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ç­–ç•¥æ¨¡å¼é‡æ„æˆåŠŸï¼');

            } catch (error) {
                testResults.push(`âŒ æµ‹è¯•å¤±è´¥: ${error.message}`);
                console.error('è¯¦ç»†é”™è¯¯:', error);
            }

            // æ˜¾ç¤ºç»“æœ
            resultsDiv.innerHTML = testResults.map(result => 
                `<div class="problem ${result.includes('âŒ') ? 'error' : 'success'}">${result}</div>`
            ).join('');
        }

        // è¿è¡Œæµ‹è¯•
        runTests();
    </script>
</body>
</html>